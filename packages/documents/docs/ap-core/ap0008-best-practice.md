# AP0008: Best Practices

In this article, we will introduce recommended practices for developers, we hope
this could help you building better interactive programs.

## Declare your Hook at the top of each component

The results generated by hooks can be considered as constants that will be used
throughout the context of our component, and these constants should be declared
firstly.

## Avoid calling hooks inside an asynchronous function

We prefer to present the main business logic in a synchronized manner, that is,
calling a hook inside a timeout, promise is not encouraged. Since it may make our
code become more and more complex and reduce maintainability.

Like, if we want to pre-load an image, do some operation, then put it into stage,
avoid coding like this:

```ts
const MyGreatComponent = () => {
  const container = new PIXI.Container();
  fetch('ap-resource://mySprite.svg').then(
      useCallback((response) => {
      const [getState, setState, subscribeStateUpdate] = useStore(STATE_STORE);
      const texture = response.blob();
      const result = PIXI.Sprite.from(texture);
      // ...
      container.addChild(result);
    })
  );
}
```

Better way:

```ts
const MyGreatComponent = () => {
  const [getState, setState, subscribeStateUpdate] = useStore(STATE_STORE);

  const container = new PIXI.Container();
  const sprite = new PIXI.Sprite(require('loading.png').default);

  container.addChild(sprite);

  fetch('ap-resource://mySprite.svg').then(() => {
      const texture = response.blob();
      const sprite.texture = PIXI.Texture.from(texture);
  });

  // ...
}
```

## Put logics that doing same thing into an independent manager

We can build managers as a pivot of entire interactive program, our Whac-A-Mole
program as an example, we built a manager to build a manager to handle the logic 
of increasing / decreasing HP, score and resetting game.

This approach make it easier to find the logic that needs to be tweaked, without
having to read each component's code one by one.

You can update the value of stores, or send a signal via event target to trigger
actions inside different managers.

For more detail, checkout the demo app.
